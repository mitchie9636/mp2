<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= locals.title ? locals.title : 'T.O.S.' %></title>
    <link rel="icon" type="image/x-icon" href="/static/assets/logo.png">
    <link rel="stylesheet" href="/static/dashboard.css">
   
</head>
<body>
    <nav>
        <div class="brand-container">
            <a href="index.html"><img class="brand-title" src="/static/assets/tos logo.png" width="80px" alt="Error"></a>
            <i class="baseline-class">Trio Outsourcing Services</i>
        </div>

        <div class="links-container">
            <a class="links" href="/findjobs">Find Jobs</a>
            <a class="links" href="companyreviews.html">Company Reviews</a>
            <a class="links" href="findsalaries.html">Find Salaries</a>
        </div>

        <div class="profile-dropdown">
            <!-- Replace 'User's Email' with the actual email address -->
            <a class="links" href="#">My Profile <span class="arrow-down">&#9660;</span></a>

                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <%= locals.user?user:'No email found'  %>
                  </a>
                  <ul class="dropdown-menu">
                <div class="dropdown-content">
                <a href="#">My Jobs</a>
                <a href="#">My Reviews</a>
                <a href="#">Settings</a>
                <a href="#">Help Center</a>
                <li><hr class="dropdown-divider"></li>
                <a href="#">Footer</a>
                <li><hr class="dropdown-divider"></li>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="/logout">
                    <form action="/logout" method="POST">
                      <button class="btn btn-danger">Logout</button>
                    </form>
            </div>
        </div>
    </nav>

    
    <main>
        <div class="jobsearch-container">
          <input class="search-container" type="text" id="jobSearchInput" placeholder="Job title, keywords, or company">
        </div>
        <div class="locationsearch-container">
          <input class="location-container" type="text" id="locationInput" placeholder="City, province, or POEA">
        </div>
        <div class="text">
          <a class="post-link" href="login"> Post your resume</a> - It only takes a few seconds
        </div>
        <div>
          <button id="find-jobs-button" class="find-button">Find Jobs</button>
        </div>
        <div class="jobsearch-result">
          <!-- Display the fetched data here -->
        </div>
      </main>
  

    <!-- custom JavaScript code goes here -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- JavaScript to handle dropdown functionality -->
    <script>
        $(document).ready(function(){
            // Toggle the dropdown menu on button click
            $(".profile-dropdown button").click(function(){
                $(".dropdown-content").toggle();
            });

            // Close the dropdown menu when clicking outside of it
            $(window).click(function(event){
                if (!event.target.matches('.profile-dropdown button')) {
                    var dropdowns = $(".dropdown-content");
                    dropdowns.each(function() {
                        $(this).hide();
                    });
                }
            });
        });
    </script>

<script>
    document.getElementById('find-jobs-button').addEventListener('click', async () => {
      const jobTitle = document.getElementById('jobSearchInput').value;
      const location = document.getElementById('locationInput').value;

      try {
        const response = await fetch('/fetchJobSearchFilters', {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
          },
        });

        if (response.ok) {
          const data = await response.json();

          // Get the jobsearch-result div element
          const jobSearchResult = document.querySelector('.jobsearch-result');

          // Display the fetched data within the jobsearch-result
          jobSearchResult.innerHTML = JSON.stringify(data, null, 2);
        } else {
          console.error('Error fetching job search filters');
        }
      } catch (error) {
        console.error(error);
      }
    });
  </script>

    <script src="your-script.js"></script>
</body>
</html>
